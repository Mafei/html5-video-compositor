<!DOCTYPE html>
<html>
<head>
    <title>BBC R&ampD Video Compositor</title>
</head>
<body>
    <script type="text/javascript" src="../dist/videocompositor.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            var canvas = document.getElementById('player-canvas');
            var videoCompositor = new VideoCompositor(canvas);

            var playlist = {
                "tracks":[
                    [{type:"video", start:0, duration:5, src:"video1.mp4", id:"1"},                            {type:"canvas", start:7.5, duration:5, src:"video2.mp4", id:"3"}],
                    [                             {type:"image", start:2.5, duration:5, src:"image.png", id:"2"},                          {type:"image", start:10, duration:5, src:"image.png", id:"4"}]
                ]
            };

            var duration = VideoCompositor.calculatePlaylistDuration(playlist);
            console.log("Playlist Duration", duration);
            console.log(videoCompositor._getPlaylistStatusAtTime(playlist, 3));
            videoCompositor.playlist = playlist;

            videoCompositor.play();

            var visualisationCanvas = document.getElementById("visualisation-canvas");
            visualisationCanvas.height = 50;

            function render () {
                VideoCompositor.renderPlaylist(playlist, visualisationCanvas, videoCompositor.currentTime);            
                requestAnimationFrame(render);
            }
            requestAnimationFrame(render);
        };
    </script>
    <canvas id="player-canvas"></canvas>
    <canvas id="visualisation-canvas"></canvas>
</body>
</html>